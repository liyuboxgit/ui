<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!--Bootstrap 不支持 IE 古老的兼容模式。为了让 IE 浏览器运行最新的渲染模式建议添加一下meta-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--自适应设备宽度-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>外贸综合服务企业出口退税风险管控信息系统-企业信息维护</title>
    <meta name="Keywords" content="外贸综合服务企业出口退税风险管控信息系统">
    <meta name="description" content="外贸综合服务企业出口退税风险管控信息系统">
    <link rel="stylesheet" href="../../static/plugins/bootstrap-3.3.7/css/bootstrap.min.css"/>
    <script type="text/javascript" src="../../static/plugins/jquery-2.1.1/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="../../static/plugins/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../../static/plugins/font-awesome-4.7.0/css/font-awesome.css"/><!-- icon字体图标 -->
    <link rel="stylesheet" href="../../static/plugins/bootstrap-table-1.11.1/bootstrap-table.css"/><!-- 表格 -->
    <script type="text/javascript" src="../../static/plugins/bootstrap-table-1.11.1/bootstrap-table.js"></script>
    <script type="text/javascript"
            src="../../static/plugins/bootstrap-table-1.11.1/extensions/export/bootstrap-table-export.js"></script>
    <!-- 表格导出 -->
    <script type="text/javascript" src="../../static/plugins/tableExport.jquery.plugin/tableExport.js"></script>
    <script type="text/javascript"
            src="../../static/plugins/bootstrap-table-1.11.1/locale/bootstrap-table-zh-CN.js"></script>
    <script type="text/javascript" src="../../static/plugins/jquery-validation-1.17.0/jquery.validate.js"></script>
    <!-- 表单验证 -->
    <script type="text/javascript"
            src="../../static/plugins/jquery-validation-1.17.0/jquery.validate.extends.js"></script>
    <link rel="stylesheet" href="../../static/plugins/poshytip-1.2/tip-yellowsimple/tip-yellowsimple.css"
          type="text/css"/>
    <script type="text/javascript" src="../../static/plugins/poshytip-1.2/jquery.poshytip.js"></script>
    <script type="text/javascript" src="../../static/js/common.js"></script><!-- 自定义公用js -->
    <link rel="stylesheet" href="../../static/css/common.css"/><!-- 自定义公用css -->
    <link rel="stylesheet" href="../../static/plugins/layer-v3.1.0/theme/default/layer.css"/><!-- 弹窗 -->
    <script type="text/javascript" src="../../static/plugins/layer-v3.1.0/layer.js"></script>
    <script type="text/javascript" src="../../static/plugins/My97DatePicker-4.8/WdatePicker.js"></script><!-- 日历 -->
</head>
<body style="overflow-y:hidden;background:#fff;">
<div class="myContainer" style="background:#fff; height:100%; border:15px solid #f4f4f4;">
    <form id="addInfoForm" class="form-horizontal layerForm" action="" method="post" enctype="multipart/form-data">
        <!-- 基本信息 -->
        <div class="tab-pane clearfix active" id="info"></div>
        <!-- 基本信息 -->
        <p class="text-center">
            <button type="reset" class="btn btn-ckts btn-sm" id="reset"><i class="glyphicon glyphicon-repeat" style="margin-right:5px;"></i>重置</button>
            <button type="button" class="btn btn-ckts btn-sm" id="save"><i class="glyphicon glyphicon-saved" style="margin-right:5px;"></i>保存</button>
        </p>
    </form>
</div>
<script type="text/javascript">
    $(function () {
        //基本信息
        var config = {
            container: "info",
            columns: [
                {col: "bqy", label: "企业ID", type: "text", readonly: true, validate: {required: true, maxlength: 32}},
                {col: "enterpriseName", label: "企业名称", type: "text", validate: {required: true, maxlength: 50}},
                {col: "customsCode", label: "企业海关代码", type: "text", validate: {required: true, maxlength: 50}},
                {col: "nsrsbh", label: "纳税人识别号", type: "text", validate: {required: true, maxlength: 50}},
                {col: "socialCreditCode", label: "社会信用代码", type: "text", validate: {required: true, maxlength: 50}},
                {col: "enterprisType", label: "企业类型", type: "select", options: getDicts("qylx"), validate: {required: true}},
                {col: "sbxtbb", label: "申报系统版本", type: "text", validate: {required: true, maxlength: 50}},
                {col: "spdmbb", label: "商品码版本", type: "text", validate: {required: true, maxlength: 50}},
                {col: "registeredCapital", label: "注册资本", type: "text", validate: {required: false, number: true}},
                {col: "kzxh", label: "扩展序号", type: "text", validate: {required: false, maxlength: 50}},
                {col: "kzmc", label: "扩展名称", type: "text", validate: {required: false, maxlength: 50}},
                {col: "kzbz", label: "扩展备注", type: "text", validate: {required: false, maxlength: 50}},
                {col: "kssj", label: "开始时间", type: "date"},
                {col: "jzrq", label: "截至时间", type: "date"},
                {col: "registeredAddress", label: "注册地址 ", type: "text", validate: {required: false, maxlength: 100}},
                {col: "scopeBusiness", label: "经营范围 ", type: "text", validate: {required: false, maxlength: 100}},
                {col: "invoiceLimit", label: "发票额度", type: "text", validate: {required: false, number: true}},
                {col: "corporateRepresentative", label: "法人代表", type: "text", validate: {required: false, maxlength: 50}},
                {col: "contacts", label: "联系人", type: "text", validate: {required: false, maxlength: 50}},
                {col: "telephone", label: "固定电话", type: "text", validate: {required: false, number: true}},
                {col: "phone", label: "手机号", type: "text", validate: {required: false, number: true}},
                {col: "openBank", label: "开户行", type: "text", validate: {required: false, maxlength: 200}},
                {col: "bankAccount", label: "开户行账户", type: "text", validate: {required: false, maxlength: 50}},
                {col: "establishTime", label: "成立日期", type: "date"},
                {col: "registrationAuthority", label: "登记机关", type: "text", validate: {required: false, maxlength: 50}},
                {col: "state", label: "状态", type: "select", options: [{text: "有效", value: "1"}, {text: "无效", value: "0"}]},
                {col: "remarks", label: "备注", type: "text", validate: {required: false, maxlength: 50}},
                {col: "departmentId", label: "部门ID", type: "text"},
                {col: "createName", label: "创建人", type: "text", readonly: true},
                {col: "createTime", label: "创建时间", type: "text", readonly: true},
                {col: "updateName", label: "修改人", type: "text", readonly: true},
                {col: "updateTime", label: "修改时间", type: "text", readonly: true}
            ]
        };

        //基本信息添加到页面
        formGenerator(config);

        //验证表单
        registerValidate("addInfoForm", config);

        //保存点击事件
        $("#save").on("click", function () {
            if (!$("#addInfoForm").valid()) return;
            var data = $("#addInfoForm").serialize();
            $.ajax({
                url: "../../../ckts/qiye/save",
                type: "post",
                data: data,
                dataType: "json",
                success: function (result) {
                    layer.msg(result.msg, {time: 1200});
                }
            });

        });

        //重置点击事件
        $("#reset").on("click", function () {
            init($.Request("id"));
        });

        init($.Request("id"));
    });

    (function ($) {
        $.extend({
            Request: function (m) {
                var sValue = location.search.match(new RegExp("[\?\&]" + m + "=([^\&]*)(\&?)", "i"));
                return sValue ? sValue[1] : sValue;
            }
        });
    })(jQuery);

    function init(id) {
        $.ajax({
            url: "../../../ckts/qiye/" + id,
            type: "GET",
            data: {},
            dataType: "json",
            success: function (result) {
                setFormData('addInfoForm', null, result.data)
            },
            error: function () {

            }
        });
    }
</script>
</body>
</html>


